@namespace LionFire.OpenCode.Blazor.Components.Files

<svg class="file-icon @SizeClass" viewBox="0 0 24 24" width="@GetSize()" height="@GetSize()" title="@(FileName ?? "file")">
    @((MarkupString)GetIconSvg())
</svg>

@code {
    [Parameter] public string? FileName { get; set; }
    [Parameter] public bool IsDirectory { get; set; }
    [Parameter] public FileIconSize Size { get; set; } = FileIconSize.Small;

    private string SizeClass => Size switch
    {
        FileIconSize.Tiny => "file-icon-tiny",
        FileIconSize.Small => "file-icon-small",
        FileIconSize.Medium => "file-icon-medium",
        FileIconSize.Large => "file-icon-large",
        _ => "file-icon-small"
    };

    private int GetSize() => Size switch
    {
        FileIconSize.Tiny => 12,
        FileIconSize.Small => 16,
        FileIconSize.Medium => 20,
        FileIconSize.Large => 24,
        _ => 16
    };

    private string GetIconSvg()
    {
        if (IsDirectory)
            return FolderIcon;

        var ext = GetExtension();
        return ext switch
        {
            // TypeScript
            ".ts" or ".tsx" => TypeScriptIcon,
            // JavaScript
            ".js" or ".jsx" or ".mjs" or ".cjs" => JavaScriptIcon,
            // C#
            ".cs" => CSharpIcon,
            // Razor
            ".razor" or ".cshtml" => RazorIcon,
            // Python
            ".py" or ".pyw" or ".pyi" => PythonIcon,
            // Rust
            ".rs" => RustIcon,
            // Go
            ".go" => GoIcon,
            // Java
            ".java" => JavaIcon,
            // JSON
            ".json" or ".jsonc" => JsonIcon,
            // YAML
            ".yml" or ".yaml" => YamlIcon,
            // Markdown
            ".md" or ".mdx" => MarkdownIcon,
            // HTML
            ".html" or ".htm" => HtmlIcon,
            // CSS
            ".css" or ".scss" or ".sass" or ".less" => CssIcon,
            // Shell
            ".sh" or ".bash" or ".zsh" or ".ps1" => ShellIcon,
            // Config
            ".config" or ".env" or ".ini" or ".toml" => ConfigIcon,
            // XML
            ".xml" or ".xaml" or ".csproj" or ".sln" => XmlIcon,
            // Image
            ".png" or ".jpg" or ".jpeg" or ".gif" or ".svg" or ".webp" or ".ico" => ImageIcon,
            // SQL
            ".sql" => SqlIcon,
            // Docker
            "dockerfile" or ".dockerfile" => DockerIcon,
            // Git
            ".gitignore" or ".gitattributes" => GitIcon,
            // Default
            _ => DefaultFileIcon
        };
    }

    private string GetExtension()
    {
        if (string.IsNullOrEmpty(FileName))
            return "";

        // Handle special filenames
        var name = Path.GetFileName(FileName)?.ToLowerInvariant() ?? "";
        if (name == "dockerfile" || name.StartsWith("dockerfile."))
            return "dockerfile";
        if (name == ".gitignore" || name == ".gitattributes")
            return name;

        return Path.GetExtension(FileName)?.ToLowerInvariant() ?? "";
    }

    // SVG icon paths - using Material Design style icons
    private const string FolderIcon = "<path fill=\"var(--icon-folder, #E8A838)\" d=\"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\"/>";

    private const string TypeScriptIcon = "<rect fill=\"#3178C6\" x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"2\"/><path fill=\"#fff\" d=\"M14.5 12.5v7h-2v-5h-2v-2h4zm-7-2v2h2v7h-2v-7h-2v-2h4z\"/>";

    private const string JavaScriptIcon = "<rect fill=\"#F7DF1E\" x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"2\"/><path fill=\"#000\" d=\"M7 17.5c.6.8 1.5 1.2 2.5 1.2 1.6 0 2.5-.8 2.5-2.2v-6h-2v5.8c0 .7-.3 1-.8 1-.6 0-.9-.4-1.2-.9l-1 1.1zm6.5-.3c.7 1 1.8 1.5 3 1.5 1.8 0 3-1 3-2.5 0-1.3-.7-2-2.3-2.5l-.5-.2c-.8-.3-1.2-.5-1.2-1 0-.4.4-.7 1-.7.6 0 1 .3 1.3.8l1.3-.8c-.5-.9-1.4-1.5-2.6-1.5-1.6 0-2.7 1-2.7 2.4 0 1.3.8 2 2.2 2.5l.5.2c.9.3 1.3.5 1.3 1 0 .5-.5.8-1.2.8-.8 0-1.4-.4-1.8-1l-1.3.8z\"/>";

    private const string CSharpIcon = "<rect fill=\"#68217A\" x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"2\"/><path fill=\"#fff\" d=\"M12 6c-3.3 0-6 2.7-6 6s2.7 6 6 6c2.2 0 4.1-1.2 5.2-3l-2.1-1.2c-.6 1-1.7 1.7-3.1 1.7-2 0-3.5-1.6-3.5-3.5S9.9 8.5 12 8.5c1.3 0 2.5.7 3.1 1.7l2.1-1.2C16.1 7.2 14.2 6 12 6zm4 5h1v1h-1v1h1v1h-1v1h-1v-1h-1v1h-1v-1h1v-1h-1v-1h1v-1h-1v-1h1v1h1v-1h1v1zm-1 2h1v-1h-1v1z\"/>";

    private const string RazorIcon = "<rect fill=\"#512BD4\" x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"2\"/><path fill=\"#fff\" d=\"M7 8h3l2 4 2-4h3l-4 8-6-8z\"/>";

    private const string PythonIcon = "<path fill=\"#3776AB\" d=\"M12 2C9.8 2 8 2.4 8 4v2h4v1H6c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h1v-2c0-1.1.9-2 2-2h6c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2h-3zm-1 2c.4 0 .8.3.8.8s-.3.8-.8.8-.8-.3-.8-.8.4-.8.8-.8z\"/><path fill=\"#FFD43B\" d=\"M12 22c2.2 0 4-.4 4-2v-2h-4v-1h6c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2h-1v2c0 1.1-.9 2-2 2H9c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h3zm1-2c-.4 0-.8-.3-.8-.8s.3-.8.8-.8.8.3.8.8-.4.8-.8.8z\"/>";

    private const string RustIcon = "<path fill=\"#000\" d=\"M12 2L2 7v10l10 5 10-5V7L12 2zm0 2.2l7.4 3.7L12 11.6 4.6 7.9 12 4.2zM4 9.1l7 3.5v7.3L4 16.4V9.1zm16 7.3l-7 3.5v-7.3l7-3.5v7.3z\"/><circle fill=\"#fff\" cx=\"12\" cy=\"12\" r=\"3\"/>";

    private const string GoIcon = "<path fill=\"#00ADD8\" d=\"M2 12c0 5.5 4.5 10 10 10s10-4.5 10-10S17.5 2 12 2 2 6.5 2 12z\"/><path fill=\"#fff\" d=\"M9 8c-.6 0-1 .4-1 1v6c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9c0-.6-.4-1-1-1H9zm.5 1.5h5v5h-5v-5z\"/>";

    private const string JavaIcon = "<path fill=\"#E76F00\" d=\"M8.5 18.5s-.9.5.6.7c1.9.2 2.8.2 4.9-.2 0 0 .5.3 1.3.6-4.5 1.9-10.2-.1-6.8-1.1zm-.6-2.5s-1 .7.5.9c2 .2 3.6.2 6.3-.3 0 0 .4.4 1 .6-5.5 1.6-11.6.1-7.8-1.2z\"/><path fill=\"#5382A1\" d=\"M13.5 10.5c1.2 1.4-.3 2.6-.3 2.6s3-1.6 1.6-3.5c-1.3-1.8-2.3-2.7 3.1-5.8 0 0-8.5 2.1-4.4 6.7z\"/><path fill=\"#E76F00\" d=\"M18 19.5s.7.5-.7 1c-2.7.8-11.2 1-13.6 0-.9-.4.7-.9 1.2-1 .5-.1.8-.1.8-.1-.9-.7-6 1.3-2.6 1.8 9.4 1.5 17.1-.7 14.9-1.7zm-9.6-7s-4.3 1-1.5 1.4c1.2.1 3.5.1 5.7-.1 1.8-.1 3.5-.4 3.5-.4s-.6.3-1.1.6c-4.3 1.1-12.5.6-10.1-.5 2-1 3.5-1 3.5-1z\"/>";

    private const string JsonIcon = "<rect fill=\"#292929\" x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"2\"/><text fill=\"#F5D742\" x=\"12\" y=\"16\" font-size=\"10\" font-weight=\"bold\" text-anchor=\"middle\">{}</text>";

    private const string YamlIcon = "<rect fill=\"#CB171E\" x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"2\"/><text fill=\"#fff\" x=\"12\" y=\"15\" font-size=\"7\" font-weight=\"bold\" text-anchor=\"middle\">YML</text>";

    private const string MarkdownIcon = "<rect fill=\"#083FA1\" x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"2\"/><path fill=\"#fff\" d=\"M5 8v8h2v-4l2 2.5 2-2.5v4h2V8h-2l-2 3-2-3H5zm10 0v5l2.5-2.5L20 13V8h-2v3l-1-1-1 1V8h-1z\"/>";

    private const string HtmlIcon = "<rect fill=\"#E44D26\" x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"2\"/><path fill=\"#fff\" d=\"M6 6l1 12 5 2 5-2 1-12H6zm9.2 3.5l-.3 3.5-2.9 1-2.9-1-.2-2h1.4l.1 1 1.6.4 1.6-.4.2-2H7.5l-.3-2h9.6l-.1 1h-1.5z\"/>";

    private const string CssIcon = "<rect fill=\"#264DE4\" x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"2\"/><path fill=\"#fff\" d=\"M6 6l1 12 5 2 5-2 1-12H6zm9.2 3.5l-.5 6-2.7 1-2.7-1-.2-2.5h1.4l.1 1.3 1.4.4 1.4-.4.2-1.8H8l-.2-2h6.9l.1-1H7.5l-.2-1h9.4l-.5.5z\"/>";

    private const string ShellIcon = "<rect fill=\"#4EAA25\" x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"2\"/><path fill=\"#fff\" d=\"M6 8l4 4-4 4 1.5 1.5L13 12 7.5 6.5 6 8zm8 8h5v2h-5v-2z\"/>";

    private const string ConfigIcon = "<path fill=\"var(--icon-base, #808080)\" d=\"M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\"/>";

    private const string XmlIcon = "<rect fill=\"#F26522\" x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"2\"/><text fill=\"#fff\" x=\"12\" y=\"15\" font-size=\"7\" font-weight=\"bold\" text-anchor=\"middle\">&lt;/&gt;</text>";

    private const string ImageIcon = "<path fill=\"var(--icon-base, #808080)\" d=\"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"/>";

    private const string SqlIcon = "<rect fill=\"#F29111\" x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"2\"/><text fill=\"#fff\" x=\"12\" y=\"15\" font-size=\"7\" font-weight=\"bold\" text-anchor=\"middle\">SQL</text>";

    private const string DockerIcon = "<path fill=\"#2496ED\" d=\"M21.8 11.1c-.1-.1-1-.7-2.9-.7-.3 0-.6 0-.9.1-.4-1.4-1.6-2-1.7-2.1l-.3-.2-.2.3c-.3.5-.5 1-.6 1.6-.2.9-.1 1.7.3 2.4-.5.3-1.3.4-2.4.4H2.1l-.1.5c-.1.9-.1 1.9.2 2.8.4 1.2 1 2.1 1.9 2.8 1.1.8 2.8 1.3 4.7 1.3 4.2 0 7.4-1.9 9-5.4.6 0 1.8.1 2.4-1.2.1-.1.1-.2.1-.2l.1-.2-.6-.2zm-15-1.8h2.1v2H6.8v-2zm2.6 0h2.1v2H9.4v-2zm0-2.5h2.1v2H9.4v-2zm2.6 2.5h2.1v2H12v-2zm0-2.5h2.1v2H12v-2zm-5.2 5h2.1v2H6.8v-2zm2.6 0h2.1v2H9.4v-2zm2.6 0h2.1v2H12v-2zm2.6 0h2.1v2h-2.1v-2zm0-2.5h2.1v2h-2.1v-2z\"/>";

    private const string GitIcon = "<path fill=\"#F05032\" d=\"M21.6 10.5l-9.1-9.1c-.5-.5-1.4-.5-1.9 0L8.3 3.7l2.4 2.4c.6-.2 1.2-.1 1.7.4.5.5.6 1.2.4 1.8l2.3 2.3c.6-.2 1.3-.1 1.8.4.7.7.7 1.8 0 2.5-.7.7-1.8.7-2.5 0-.5-.5-.6-1.4-.3-2l-2.1-2.1v5.6c.2.1.3.2.4.3.7.7.7 1.8 0 2.5-.7.7-1.8.7-2.5 0-.7-.7-.7-1.8 0-2.5.2-.2.4-.3.6-.4v-5.6c-.2-.1-.4-.2-.6-.4-.5-.5-.6-1.4-.3-2L7.3 5l-5 5c-.5.5-.5 1.4 0 1.9l9.1 9.1c.5.5 1.4.5 1.9 0l8.3-8.3c.5-.6.5-1.4 0-1.9z\"/>";

    private const string DefaultFileIcon = "<path fill=\"var(--icon-base, #808080)\" d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\"/>";
}
